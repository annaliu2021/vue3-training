import{P as u}from"./paginationComponent-0bfe6d7a.js";import{_,r as g,o as c,c as i,a as t,t as a,F as m,f,b}from"./index-881a622c.js";const{VITE_API_ROOT:p,VITE_API_PATH:$}={VITE_API_ROOT:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"annavue",BASE_URL:"/vue3-training",MODE:"production",DEV:!1,PROD:!0},P={data(){return{text:"訂單管理",orders:[],pagination:{}}},mounted(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");e===void 0||e.length===0?this.$router.push({name:"login"}):(this.$http.defaults.headers.common.Authorization=e,this.checkAdmin())},methods:{getOrders(e=1){const n=`${p}/api/${$}/admin/orders?page=1`;this.$http.get(n).then(s=>{const{orders:l,pagination:o}=s.data;this.orders=l,this.pagination=o}).catch(s=>{alert(s.response.data.message)})},checkAdmin(){const e=`${p}/api/user/check`;this.$http.post(e).then(()=>{this.getOrders()}).catch(n=>{alert(n.response.data.message),this.$router.push({name:"login"})})}},components:{PaginationComponent:u}},T={class:"container"},A={class:"fs-3 fw-bold text-center mb-3"},k={class:"table align-middle"},O=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"序號"),t("th",{scope:"col"},"訂單編號"),t("th",{scope:"col"},"訂購人姓名"),t("th",{scope:"col"},"訂單狀態"),t("th",{scope:"col"},"操作")])],-1),x=t("td",null,null,-1),E=t("td",null,[t("div",{class:"btn-group",role:"group","aria-label":"Basic example"},[t("button",{type:"button",class:"btn btn-primary"},"訂單細節")])],-1);function I(e,n,s,l,o,V){const d=g("pagination-component");return c(),i("div",T,[t("h2",A,a(o.text),1),t("table",k,[O,t("tbody",null,[(c(!0),i(m,null,f(o.orders,(r,h)=>(c(),i("tr",{key:r.id},[t("td",null,a(++h),1),t("td",null,a(r.id),1),t("td",null,a(r.user.name),1),x,E]))),128))])]),b(d,{pages:o.pagination,onGoToPage:e.getData},null,8,["pages","onGoToPage"])])}const B=_(P,[["render",I]]);export{B as default};
