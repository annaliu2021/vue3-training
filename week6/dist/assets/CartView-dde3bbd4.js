import{_ as v,j as x,o as i,c as u,a as t,t as n,F as m,f as b,n as C}from"./index-881a622c.js";const{VITE_API_ROOT:h,VITE_API_PATH:_}={VITE_API_ROOT:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"annavue",BASE_URL:"/vue3-training",MODE:"production",DEV:!1,PROD:!0},y={data(){return{text:"購物車",cart:{}}},mounted(){this.getCartData()},methods:{goToOrder(){this.$router.push({name:"order"})},getCartData(){const a=`${h}/api/${_}/cart`;this.$http.get(a).then(e=>{this.cart=e.data.data}).catch(e=>{alert(e.response.data.message)})},removeOneCartItem(a){const e=`${h}/api/${_}/cart/${a}`;this.$http.delete(e).then(l=>{alert(l.data.message),this.getCartData()}).catch(l=>{alert(l.response.data.message)})},removeAllCartItem(){const a=`${h}/api/${_}/carts`;this.$http.delete(a).then(e=>{alert(e.data.message),this.getCartData()}).catch(e=>{alert(e.response.data.message)})},changeQty(a,e){const l=`${h}/api/${_}/cart/${a.id}`;this.$http.put(l,{data:{product_id:a.product.id,qty:Number(e)}}).then(d=>{alert(d.data.message),this.getCartData()}).catch(d=>{alert(d.response.data.message)})}},components:{RouterLink:x}},f={class:"container"},$={class:"fs-3 fw-bold text-center mb-3"},O={class:"table align-middle"},T=t("thead",null,[t("tr",null,[t("th",{scope:"col"}),t("th",{scope:"col"},"產品圖片"),t("th",{scope:"col"},"產品名稱"),t("th",{scope:"col",width:"150px",class:"text-end"},"單價"),t("th",{scope:"col",width:"200px",class:"text-center"},"數量"),t("th",{scope:"col",width:"150px",class:"text-end"},"小計")])],-1),A=["onClick"],k={class:"text-end"},D=["value","onChange"],E=["value"],V={class:"text-end"},w={colspan:"6",class:"text-end"},P={class:"d-flex justify-content-center my-3"},I=["disabled"],R=["disabled"];function B(a,e,l,d,r,o){var p,g;return i(),u("div",f,[t("h2",$,n(r.text),1),t("table",O,[T,t("tbody",null,[(i(!0),u(m,null,b(r.cart.carts,s=>(i(),u("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:c=>o.removeOneCartItem(s.id)},null,8,A)]),t("td",null,[t("div",{class:"cart-img",role:"button",style:C({backgroundImage:"url("+s.product.imageUrl+")"})},null,4)]),t("td",null,n(s.product.title),1),t("td",k,"$ "+n(s.product.price)+"元",1),t("td",null,[t("select",{class:"form-select mx-auto",value:s.qty,style:{width:"100px"},onChange:c=>o.changeQty(s,c.target.value)},[(i(),u(m,null,b(20,c=>t("option",{value:c},n(c),9,E)),64))],40,D)]),t("td",V,"$ "+n(s.total)+"元",1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",w,"總計金額：$ "+n(r.cart.final_total)+" 元",1)])])]),t("div",P,[t("button",{type:"button",class:"btn btn-outline-secondary p-2 me-3",onClick:e[0]||(e[0]=(...s)=>o.removeAllCartItem&&o.removeAllCartItem(...s)),disabled:((p=r.cart.carts)==null?void 0:p.length)===0}," 清空購物車 ",8,I),t("button",{type:"button",class:"btn btn-outline-danger p-2",disabled:((g=r.cart.carts)==null?void 0:g.length)===0,onClick:e[1]||(e[1]=(...s)=>o.goToOrder&&o.goToOrder(...s))},"下一步:填寫訂購資訊",8,R)])])}const S=v(y,[["render",B]]);export{S as default};
